<template>
  <svg class="rank" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="50%" y1="100%" x2="50%" y2="0%" :id="gradientId">
        <stop stop-color="var(--stop-color1)" offset="0%"/>
        <stop stop-color="var(--stop-color2)" offset="100%"/>
      </linearGradient>
    </defs>
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" v-html="badge"></g>
  </svg>
</template>

<script>
import { rankToGradientStopBottom, rankToGradientStopTop } from '../common/rank';

const RANK_BADGE = [
  '<path d="m5.72527887 9.79277747 5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0l5.7252788 1.63579397c.4293016.12265758.7252789.51504363.7252789.96152393v4.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-4.5828336c0-.4464803.29597731-.83886635.72527887-.96152393z"/>',
  '<path d="m12.5494423 12.1569835 5.7252788 1.635794c.4293016.1226576.7252789.5150436.7252789.9615239v3.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-3.5828336c0-.4464803.29597731-.8388663.72527887-.9615239l5.72527883-1.635794c.3591099-.1026028.7397747-.1026028 1.0988846 0zm0-7 5.7252788 1.63579397c.4293016.12265758.7252789.51504358.7252789.96152394v3.58283359c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-3.58283359c0-.44648036.29597731-.83886636.72527887-.96152394l5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0z"/>',
  '<path d="m12.5494423 16.1569835 5.7252788 1.635794c.4293016.1226576.7252789.5150436.7252789.9615239v.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-.5828336c0-.4464803.29597731-.8388663.72527887-.9615239l5.72527883-1.635794c.3591099-.1026028.7397747-.1026028 1.0988846 0zm0-8 5.7252788 1.63579397c.4293016.12265758.7252789.51504363.7252789.96152393v4.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-4.5828336c0-.4464803.29597731-.83886635.72527887-.96152393l5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0zm0-4 5.7252788 1.63579397c.4293016.12265758.7252789.51504358.7252789.96152394v.5828336c0 .27614237-.2238576.5-.5.5-.0464583 0-.0926898-.00647496-.1373606-.01923803l-5.8131971-1.66091348c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.66091348c-.2655175.07586215-.54226039-.0778839-.61812253-.34340141-.01276307-.04467073-.01923803-.0909023-.01923803-.13736056v-.5828336c0-.44648036.29597731-.83886636.72527887-.96152394l5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0z"/>',
  '<path d="m13.1211031 16.3210755 5.153618 1.471702c.4293016.1226576.7252789.5150436.7252789.9615239v.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-.5828336c0-.4464803.29597731-.8388663.72527887-.9615239l5.15361803-1.471702c.7034513.3529479 1.5387549.3529479 2.2422062 0zm2.5468969-7.2740441 2.6067211.74574607c.4293016.12265758.7252789.51504363.7252789.96152393v4.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-3.5466394-1.0138656 1.5375534-1.5362644c.9763107-.9763108.9763107-2.5592232 0-3.53553395zm-7.337 0-.68455339.68520165c-.97631073.97631075-.97631073 2.55922315 0 3.53553395l1.53655339 1.5362644-3.54563944 1.0138656c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-4.5828336c0-.4464803.29597731-.83886635.72527887-.96152393zm4.3761068-.83992462 2.5857864 2.58578642c.3905243.3905243.3905243 1.0236893 0 1.4142136l-2.5857864 2.5857864c-.3905243.3905243-1.0236893.3905243-1.4142136 0l-2.58578642-2.5857864c-.39052429-.3905243-.39052429-1.0236893 0-1.4142136l2.58578642-2.58578642c.3905243-.39052429 1.0236893-.39052429 1.4142136 0zm-.1576645-4.05012328 5.7252788 1.63579397c.4293016.12265758.7252789.51504358.7252789.96152394v.5828336c0 .27614237-.2238576.5-.5.5-.0464583 0-.0926898-.00647496-.1373606-.01923803l-5.8131971-1.66091348c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.66091348c-.2655175.07586215-.54226039-.0778839-.61812253-.34340141-.01276307-.04467073-.01923803-.0909023-.01923803-.13736056v-.5828336c0-.44648036.29597731-.83886636.72527887-.96152394l5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0z"/>',
  '<path d="m15.743 15.0690314 2.5317211.7237461c.4293016.1226576.7252789.5150436.7252789.9615239v2.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-5.8131971-1.6609135c-.3591099-.1026028-.7397747-.1026028-1.0988846 0l-5.81319714 1.6609135c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-2.5828336c0-.4464803.29597731-.8388663.72527887-.9615239l2.53085915-.7225202 2.49386198 1.4401057c.7735027.446582 1.7264973.446582 2.5 0zm-3.243-7.28035627 2.4641016 1.42264974c.3094011.17863279.5.50875981.5.86602543v2.8452994c0 .3572656-.1905989.6873926-.5.8660254l-2.4641016 1.4226498c-.3094011.1786328-.6905989.1786328-1 0l-2.46410162-1.4226498c-.30940107-.1786328-.5-.5087598-.5-.8660254v-2.8452994c0-.35726562.19059893-.68739264.5-.86602543l2.46410162-1.42264974c.3094011-.17863279.6905989-.17863279 1 0zm4.464 3.62935627 1.3107211.3747461c.4293016.1226576.7252789.5150436.7252789.9615239v.5828336c0 .2761424-.2238576.5-.5.5-.0464583 0-.0926898-.006475-.1373606-.019238l-1.4454786-.412764c.0309252-.1572702.0469408-.3187365.0469408-.4824833zm-9.929 0 .00089838 1.5046183c0 .1637468.01601561.3252131.04694078.4824833l-1.4454786.412764c-.2655175.0758621-.54226039-.0778839-.61812253-.3434014-.01276307-.0446708-.01923803-.0909023-.01923803-.1373606v-.5828336c0-.4464803.29597731-.8388663.72527887-.9615239zm5.5144423-7.2610479 5.7252788 1.63579397c.4293016.12265758.7252789.51504358.7252789.96152394v2.5828336c0 .27614237-.2238576.5-.5.5-.0464583 0-.0926898-.00647496-.1373606-.01923803l-1.4947972-.42778907c-.1759262-.61515558-.5843694-1.14909453-1.1537406-1.47782115l-2.4641016-1.42264973c-.7735027-.44658199-1.7264973-.44658199-2.5 0l-2.46410162 1.42264973c-.56937121.32872662-.9778144.86266557-1.15374062 1.47782115l-1.4947972.42778907c-.2655175.07586215-.54226039-.0778839-.61812253-.34340141-.01276307-.04467073-.01923803-.0909023-.01923803-.13736056v-2.5828336c0-.44648036.29597731-.83886636.72527887-.96152394l5.72527883-1.63579397c.3591099-.1026028.7397747-.1026028 1.0988846 0z"/>',
];

export default {
  name: 'DaRank',
  props: {
    rank: {
      type: Number,
      required: true,
    },
    colorByRank: Boolean,
  },
  data() {
    return {
      gradientId: Math.random().toString(36).substring(7),
    };
  },
  computed: {
    badge() {
      return this.rank > 0 ? RANK_BADGE[this.rank - 1] : RANK_BADGE[0];
    },
  },
  watch: {
    rank() {
      this.updateColors();
    },
  },
  methods: {
    updateColors() {
      if (this.colorByRank) {
        this.$el.style.setProperty('--stop-color1', rankToGradientStopBottom(this.rank));
        this.$el.style.setProperty('--stop-color2', rankToGradientStopTop(this.rank));
      }
    },
  },
  mounted() {
    this.$el.style.setProperty('--fill', `url(#${this.gradientId})`);
    this.updateColors();
  },
};
</script>

<style>
.rank {
  width: 32px;
  height: 32px;

  & path {
    fill: var(--fill);
  }
}
</style>
